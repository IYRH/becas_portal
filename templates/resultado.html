<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consulta de Resultado</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <a class="navbar-brand" href="{{ url_for('main.index') }}">Portal de Becas</a>
  </div>
</nav>

<div class="container my-5">
  <h2 class="text-center mb-4">Consulta tu Resultado</h2>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="alert alert-danger text-center">{{ messages[0] }}</div>
    {% endif %}
  {% endwith %}

  <form method="POST" class="shadow p-4 bg-white rounded mb-4">
    <div class="mb-3">
      <label class="form-label">Ingresa tu Matricula</label>
      <input type="text" name="matricula" class="form-control" required>
    </div>
    <button class="btn btn-primary w-100">Consultar</button>
  </form>

  {% if solicitud %}
    <div class="card shadow-sm">
      <div class="card-body">
        <h4 class="text-primary mb-3">Resultado de tu solicitud</h4>
        <h5 class="card-title">{{ solicitud[0] }} {{ solicitud[1] }}</h5>
        <p><strong>Carrera:</strong> {{ solicitud[4] }}</p>
        <p><strong>Beca solicitada:</strong> {{ solicitud[5] }}</p>
        <p><strong>Estatus de tu solicitud:</strong>
          {% if solicitud[3] == 'Aprobada' %}
            <span class="badge bg-success">Aprobada </span>
            <p class="card-text"><strong>Comentario sobre la solicitud:</strong> {{ solicitud[6] or 'Sin comentarios' }}</p>
            <a href="{{ url_for('main.formulario_pago') }}" class="btn btn-primary btn-custom">Formulario Pago</a><br><br>  
            <p><strong>Estatus de tu pago:</strong>
            {% if pagos[3] == 'Aprobada' %}
              <span class="badge bg-success">Pago Aprobado</span>
            {% elif pagos[3] == 'Rechazada' %}
              <span class="badge bg-danger">Pago Rechazado</span>
            {% elif pagos[3] == 'En revisión' %}
              <span class="badge bg-warning text-dark">Pago en revisión</span>
            {% else %}
              <span class="badge bg-secondary">Pago Pendiente</span>
            {% endif %}
            <p class="card-text"><strong>Comentario sobre el pago:</strong> {{ pagos[4] or 'Sin comentarios' }}</p>
          {% elif solicitud[3] == 'Rechazada' %}
            <span class="badge bg-danger">Rechazada</span>
            <p class="card-text"><strong>Comentario del administrador:</strong> {{ solicitud[6] or 'Sin comentarios' }}</p>
          {% elif solicitud[3] == 'En revisión' %}
            <span class="badge bg-warning text-dark">En revisión</span>
            <p class="card-text"><strong>Comentario del administrador:</strong> {{ solicitud[6] or 'Sin comentarios' }}</p>
          {% else %}
            <span class="badge bg-secondary">Recibida</span>
          {% endif %}
      </div>
    </div>
  {% endif %}

          


<footer class="bg-primary text-light text-center py-3">
  <small>© 2025 Portal de Becas</small>
</footer>

</body>
</html>
